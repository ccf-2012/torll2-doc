# 媒体库设置

`torll2` 的媒体库设置与其他设置不同，它没有一个独立的全局配置页面。媒体库的位置和访问方式是与 **下载器 (Downloader)** 配置紧密绑定的。

**入口**: 下载 -> 下载客户端 -> 添加/编辑下载器

---

## 核心概念：本地映射路径 (`Local Map Path`)

**本地映射路径** 是“媒体库设置”中最核心、也是唯一的关键配置项。它的作用是告诉 `torll2` 服务，你的媒体文件最终存储在哪个 **根目录** 下。

### 为什么需要它？

`torll2` 作为一个管理服务，经常需要直接访问媒体文件以执行各种操作，例如：

- **扫描文件**: 分析剧集文件，更新下载状态。
- **删除文件**: 当你从媒体库中删除条目时，可以选择同时删除硬盘上的物理文件。
- **重建硬链接**: 重新整理文件。

由于 `torll2` (运行于 Docker 中) 和你的媒体文件（可能存储在 NAS、本地硬盘或其他地方）不一定在同一个文件系统路径下，`Local Map Path` 就充当了它们之间的“翻译官”。

### 如何配置？

1.  在 `torll2` 的 Web UI 中，导航至 **下载** -> **下载客户端**。
2.  添加一个新的下载器，或编辑一个已有的下载器。
3.  在配置表单中找到 **`Local Map Path`** 字段。
4.  填入 `torll2` 容器 **能够访问到** 的媒体根目录的 **绝对路径**。

### 配置示例

假设你的媒体文件存储在宿主机的 `/data/media` 目录下，并且你通过 Docker 的 volume 映射，将这个目录挂载到了 `torll2` 容器的 `/media` 路径下。

-   你的 `docker-compose.yml` 中可能有类似这样的配置：
    ```yaml
    services:
      torll2:
        volumes:
          - /data/media:/media
    ```
-   qBittorrent 下载的文件保存在 `/data/media/downloads`。
-   `rcp` 脚本将文件硬链接到 `/data/media/Movies` 或 `/data/media/TV`。

在这种情况下，`torll2` 要想访问到任何媒体文件（例如 `/data/media/Movies/一部电影/movie.mkv`），它都需要通过容器内的 `/media` 路径来访问。

因此，你的 **`Local Map Path`** 就应该设置为：

```
/media
```

当 `torll2` 需要操作一个文件时，它会自动将 `Local Map Path` 和数据库中记录的相对路径（例如 `Movies/一部电影/movie.mkv`）拼接起来，形成一个它自己可以访问的完整绝对路径：`/media/Movies/一部电影/movie.mkv`。
